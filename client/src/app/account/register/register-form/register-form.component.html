<form class="form" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div class="form__controls">
    <form-field>
      <label for="form-email">Email</label>
      <input
        id="form-email"
        type="email"
        class="form__field"
        spellcheck="false"
        autocapitalize="off"
        autofocus="autofocus"
        autocomplete="username email"
        formControlName="email"
      />
    </form-field>
    <form-field>
      <label for="form-name">Username</label>
      <input
        id="form-name"
        type="text"
        class="form__field"
        autocomplete="off"
        spellcheck="true"
        formControlName="username"
      />
    </form-field>
    <form-field>
      <label for="form-password">Password</label>
      <div class="form__toggle-wrapper">
        <input
          id="form-password"
          [type]="passwordType()"
          class="form__field form__field_password"
          autocomplete="new-password"
          aria-autocomplete="list"
          formControlName="password"
          (change)="onPasswordChange()"
        />
        <button
          type="button"
          class="form__password-toggle"
          (click)="togglePasswordVisibility()"
        >
          <svg
            *ngIf="!showPassword"
            class="form__password-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            focusable="false"
            role="presentation"
          >
            <g fill="currentColor" fill-rule="evenodd">
              <path
                d="M11.983 15.984a4.005 4.005 0 0 1-4.002-4c0-2.206 1.795-4 4.002-4a4.005 4.005 0 0 1 4.002 4c0 2.206-1.795 4-4.002 4M12 4C6.48 4 2 8.84 2 12c0 3.086 4.577 8 10 8s10-4.914 10-8c0-3.16-4.481-8-10-8"
              ></path>
              <circle cx="12" cy="12" r="2"></circle>
            </g>
          </svg>
          <svg
            *ngIf="showPassword"
            class="form__password-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            focusable="false"
            role="presentation"
          >
            <g fill="currentColor" fill-rule="evenodd">
              <path
                d="M12 18c-4.536 0-7.999-4.26-7.999-6 0-2.001 3.459-6 8-6 4.376 0 7.998 3.973 7.998 6 0 1.74-3.462 6-7.998 6m0-14C6.48 4 2 8.841 2 12c0 3.086 4.576 8 10 8 5.423 0 10-4.914 10-8 0-3.159-4.48-8-10-8"
              ></path>
              <path
                d="M11.977 13.984c-1.103 0-2-.897-2-2s.897-2 2-2c1.104 0 2 .897 2 2s-.896 2-2 2m0-6c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.207 0 4-1.794 4-4s-1.793-4-4-4"
              ></path>
            </g>
          </svg>
        </button>
      </div>
    </form-field>
    <form-field>
      <label for="form-password">Password Confirmation</label>
      <div class="form__toggle-wrapper">
        <input
          id="form-password-confirmation"
          [type]="passwordConfirmationType()"
          class="form__field form__field_password-confirmation"
          aria-autocomplete="list"
          formControlName="passwordConfirmation"
          (change)="onPasswordChange()"
        />
        <button
          type="button"
          class="form__password-confirmation-toggle"
          (click)="togglePasswordConfirmationVisibility()"
        >
          <svg
            *ngIf="!showPasswordConfirmation"
            class="form__password-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            focusable="false"
            role="presentation"
          >
            <g fill="currentColor" fill-rule="evenodd">
              <path
                d="M11.983 15.984a4.005 4.005 0 0 1-4.002-4c0-2.206 1.795-4 4.002-4a4.005 4.005 0 0 1 4.002 4c0 2.206-1.795 4-4.002 4M12 4C6.48 4 2 8.84 2 12c0 3.086 4.577 8 10 8s10-4.914 10-8c0-3.16-4.481-8-10-8"
              ></path>
              <circle cx="12" cy="12" r="2"></circle>
            </g>
          </svg>
          <svg
            *ngIf="showPasswordConfirmation"
            class="form__password-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            focusable="false"
            role="presentation"
          >
            <g fill="currentColor" fill-rule="evenodd">
              <path
                d="M12 18c-4.536 0-7.999-4.26-7.999-6 0-2.001 3.459-6 8-6 4.376 0 7.998 3.973 7.998 6 0 1.74-3.462 6-7.998 6m0-14C6.48 4 2 8.841 2 12c0 3.086 4.576 8 10 8 5.423 0 10-4.914 10-8 0-3.159-4.48-8-10-8"
              ></path>
              <path
                d="M11.977 13.984c-1.103 0-2-.897-2-2s.897-2 2-2c1.104 0 2 .897 2 2s-.896 2-2 2m0-6c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.207 0 4-1.794 4-4s-1.793-4-4-4"
              ></path>
            </g>
          </svg>
        </button>
      </div>
    </form-field>
    <span
      *ngIf="
        this.registerForm.controls['passwordConfirmation'].hasError('mismatch')
      "
      >Password do not match.</span
    >
    <div class="form__notes">
      By signing up, you confirm that you've read and accepted our Terms of
      Service and Privacy Policy.
    </div>
    <button type="submit" [disabled]="registerForm.invalid || isLoading">
      {{ isLoading ? 'Waiting...' : 'Continue' }}
    </button>
  </div>
</form>
